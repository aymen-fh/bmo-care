<%- include('../partials/layout-start', { title: __('dashboard'), activePage: 'dashboard' }) %>

<div class="page-container-clean">
    <!-- Page Header / Center Info -->
    <% if (center) { %>
        <div class="admin-center-header glass">
            <div class="admin-center-icon">
                <i class="fas fa-building"></i>
            </div>
            <div class="admin-center-text">
                <h2><%= center.name %></h2>
                <% if (center.address) { %>
                    <p>
                        <i class="fas fa-map-marker-alt"></i>
                        <span><%= center.address %></span>
                    </p>
                <% } %>
            </div>
        </div>
    <% } else { %>
        <div class="alert alert-warning">
            <i class="fas fa-exclamation-triangle"></i>
            <%= __('noCenterAssigned') %>
        </div>
    <% } %>

    <!-- Stats Cards Grid -->
    <div class="stats-grid-clean">
        <div class="stat-card-clean">
            <div class="stat-content-clean">
                <h2><%= stats.specialists || 0 %></h2>
                <p><%= __('specialists') %></p>
            </div>
            <div class="stat-icon-clean icon-blue">
                <i class="fas fa-user-md"></i>
            </div>
        </div>

        <div class="stat-card-clean">
            <div class="stat-content-clean">
                <h2><%= stats.parents || 0 %></h2>
                <p><%= __('parents') %></p>
            </div>
            <div class="stat-icon-clean icon-green">
                <i class="fas fa-users"></i>
            </div>
        </div>

        <div class="stat-card-clean">
            <div class="stat-content-clean">
                <h2><%= stats.children || 0 %></h2>
                <p><%= __('children') %></p>
            </div>
            <div class="stat-icon-clean icon-orange">
                <i class="fas fa-child"></i>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="section-clean">
        <div class="section-header-clean">
            <h3>
                <%= __('quickActions') %>
                <i class="fas fa-bolt" style="color: var(--warning);"></i>
            </h3>
        </div>
        <div class="actions-grid-clean">
            <a href="/admin/specialists/create" class="action-card-clean">
                <i class="fas fa-user-plus"></i>
                <span><%= __('createSpecialist') %></span>
            </a>
            <a href="/admin/specialists" class="action-card-clean">
                <i class="fas fa-user-md"></i>
                <span><%= __('specialists') %></span>
            </a>
        </div>
    </div>

    <!-- Recent Specialists Table -->
    <div class="section-clean">
        <div class="section-header-clean">
            <h3>
                <%= __('adminRecentSpecialists') %>
                <i class="fas fa-user-md" style="color: var(--primary);"></i>
            </h3>
            <a href="/admin/specialists" class="view-all-link"><%= __('viewAll') %></a>
        </div>

        <div class="table-container-clean">
            <table class="clean-table">
                <thead>
                    <tr>
                        <th class="text-right"><%= __('name') %></th>
                        <th><%= __('specialization') %></th>
                        <th><%= __('email') %></th>
                    </tr>
                </thead>
                <tbody>
                    <% if (recentSpecialists && recentSpecialists.length > 0) { %>
                        <% recentSpecialists.forEach(function(specialist) { %>
                            <tr>
                                <td>
                                    <div class="child-cell">
                                        <div class="avatar-square-blue" style="overflow: hidden;">
                                            <% if (specialist.profilePhoto) { %>
                                                <img src="<%= uploadUrl(specialist.profilePhoto) %>" alt="<%= specialist.name %>" style="width: 100%; height: 100%; object-fit: cover;" />
                                            <% } else { %>
                                                <i class="fas fa-user-md"></i>
                                            <% } %>
                                        </div>
                                        <span class="child-name-text"><%= specialist.name %></span>
                                    </div>
                                </td>
                                <td><%= specialist.specialization || '-' %></td>
                                <td><%= specialist.email %></td>
                            </tr>
                        <% }); %>
                    <% } else { %>
                        <tr>
                            <td colspan="3" class="empty-table"><%= __('noData') %></td>
                        </tr>
                    <% } %>
                </tbody>
            </table>
        </div>
    </div>
</div>

<style>
    .admin-center-header {
        padding: 1.5rem;
        margin-bottom: 2rem;
        display: flex;
        align-items: center;
        gap: 1.25rem;
    }

    .admin-center-icon {
        width: 56px;
        height: 56px;
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--primary);
        background: var(--primary-light);
        border: 1px solid var(--border-color);
        flex: 0 0 auto;
        font-size: 1.6rem;
    }

    .admin-center-text h2 {
        margin: 0;
        font-size: 1.35rem;
        color: var(--text-primary);
        font-weight: 800;
    }

    .admin-center-text p {
        margin: 0.35rem 0 0;
        color: var(--text-secondary);
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-weight: 600;
        font-size: 0.95rem;
    }

    @media (max-width: 900px) {
        .admin-center-header {
            flex-direction: column;
            align-items: flex-start;
        }
    }
</style>

<%- include('../partials/layout-end') %>